@inject ISpinnerService _spinnerService
@inherits ADisposibleBaseComponent

<SfSpinner @ref="Spinner" Target="@_spinnerTarget" Label="@_message" CssClass="e-spin-overlay" Type="SpinnerType.Fabric" />

@code {
    private SfSpinner Spinner { get; set; }
    private string _message;
    private string _spinnerTarget = "#spinner-container";

    protected override void OnInitialized()
    {
        _spinnerService.OnShow += ShowSpinner;
        _spinnerService.OnHide += HideSpinner;

        base.OnInitialized();
    }

    private void ShowSpinner(string message = "Test test")
    {
        _message = message;

        Spinner.ShowSpinner(_spinnerTarget);
    }

    private void HideSpinner()
    {
        Spinner.HideSpinner(_spinnerTarget);
    }


    public override void Dispose()
    {
        _spinnerService.OnShow -= ShowSpinner;
        _spinnerService.OnHide -= HideSpinner;
    }
}
