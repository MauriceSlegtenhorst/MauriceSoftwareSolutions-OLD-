@inject ISpinnerService _spinnerService
@inherits ADisposibleBaseComponent

<SfSpinner @ref="Spinner" Target="@_spinnerTarget" CssClass="e-spin-overlay" Type="SpinnerType.Fabric" ZIndex="3"/>

@code {
    private SfSpinner Spinner { get; set; }
    private string _spinnerTarget = "#spinner-container";

    protected override void OnInitialized()
    {
        _spinnerService.OnShow += ShowSpinner;
        _spinnerService.OnHide += HideSpinner;

        base.OnInitialized();
    }

    private async Task ShowSpinner(string message = null)
    {
        var dictionary = new Dictionary<string, object>();

        dictionary.Add(nameof(Spinner.Label), message);

        var parameters = ParameterView.FromDictionary(dictionary);

        await Spinner.SetParametersAsync(parameters);

        await Spinner.Show();
    }

    private async Task HideSpinner()
    {
        await Spinner.Hide();
    }


    public override void Dispose()
    {
        _spinnerService.OnShow -= ShowSpinner;
        _spinnerService.OnHide -= HideSpinner;
    }
}
